<!doctype html><html lang=en-US><head><meta charset=utf-8><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><title>Zero knowledge: как это работает? Простое объяснение | Ilya Krukowski</title>
<meta name=viewport content="width=device-width"><meta name=description content='В чём смысл zero knowledge и как это работает? Мы рассмотрим эту концепцию на двух простых примерах.'><meta name=keywords content="Ilya Krukowski,Илья Круковский,bodrovis,статьи о web,программирование,дизайн,регулярные выражения,web-дизайн,ruby,rails,javascript,jquery,css,html,regexp,плагины,radiant wind,plugins,gems,libraries,tutor,personal teacher,it"><meta name=author content="bodrovis"><meta name=robots content="all"><link rel=apple-touch-icon href=/apple-touch-icon.png><link rel=icon href=/favicon.ico type=image/x-icon><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link href="https://fonts.googleapis.com/css2?family=PT+Sans+Caption:wght@400;700&family=PT+Sans:wght@400;700&display=swap" rel=stylesheet><link rel=stylesheet href=/stylesheets/single_post.scss integrity crossorigin=anonymous><meta property="og:image" content="https://bodrovis.tech/meta/zero-knowledge-prostymi-slovami.webp"><meta property="og:type" content="blog"><meta property="og:title" content="Zero knowledge: как это работает? Простое объяснение |  by Ilya Krukowski"><meta property="og:description" content="В чём смысл zero knowledge и как это работает? Мы рассмотрим эту концепцию на двух простых примерах."><meta property="og:url" content="https://bodrovis.tech/posts/zero-knowledge-prostymi-slovami/"><meta property="og:site_name" content="Ilya Krukowski"></head><body><header lang=en-US><div id=main-top-block class=light_gradient><nav><a href=/ class="icon icon-home" title=Homepage></a><a class="icon icon-book" title=Blog href=/blog></a><a class="icon icon-tags" title=Tags href=/tags></a><a class="icon icon-search with-spacer" title=Search href=/search></a><a class="icon icon-github" title=GitHub href=https://github.com/bodrovis target=_blank></a><a class="icon icon-youtube" title=YouTube href=https://www.youtube.com/@IlyaBodrovKrukowski target=_blank></a><a class="icon icon-telegram" title=Telegram href=https://t.me/dev_in_ruby_colors target=_blank></a><a class="icon icon-linkedin" title=LinkedIn href=https://linkedin.com/in/bodrovis target=_blank></a></nav></div><div id=logo><img src=/images/icon150trans.webp width=150 height=150 alt="Ilya Krukowski logo" class=img-logo><p><a href=/blog><span class=capital>I</span>lya <span class=capital>K</span>rukowski
<span class=subtitle>https://bodrovis.tech</span></a></p></a></header><main id=content data-pagefind-body><h1>Zero knowledge: как это работает? Простое объяснение</h1><article class=full-entry><time class="timestamp subtext" datetime="2024-08-18 00:00:00 +0000 UTC">August 18, 2024
</time><a class=badge href=/tags/%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%BE%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D1%8F>#криптография</a><section id=post-body><aside id=toc-wrapper><h4>Index</h4><nav id=TableOfContents><ul><li><a href=#пещера-али-бабы>Пещера Али Бабы</a><ul><li><a href=#почему-бы-наблюдающему-просто-не-подойти-ко-входу>Почему бы наблюдающему просто не подойти ко входу?</a></li></ul></li><li><a href=#цветные-шарики>Цветные шарики</a></li></ul></nav></aside><p>Мы уже говорили о ZK и rollups в одном из уроков по Solidity, который можно посмотреть вот тут:</p><iframe width=560 height=315 src=https://www.youtube.com/embed/n-AoDMc5rc8 title="YouTube video player" frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><p>Но как вообще объяснить идею ZK для тех, кто только входит в эту область? Есть два хороших примера, которые мы сегодня рассмотрим. Но в первую очередь важно понять основную суть ZK. Мы (prover) доказываем некому проверяющему наблюдателю (verifier), что обладаем некой секретной информацией, но при этом данную информацию не разглашаем. Больше того, само доказательство нельзя передать третьим лицам. Казалось бы, разве это возможно?</p><p><em>Эта запись также доступна <a href=https://t.me/dev_in_ruby_colors/1112>в канале Telegram &ldquo;DEV: Рубиновые тона&rdquo;</a>, а обсудить же эту тему можно <a href=https://t.me/+MxYT6-01eeA1NTYy>в нашем чате Telegram</a>.</em></p><h2 id=пещера-али-бабы>Пещера Али Бабы</h2><p>Первый пример связан с так называемой <strong>пещерой Али Бабы</strong> (только самого героя там нет — видимо, ушёл по делам). Эта пещера круговая, в неё есть всего один незапертый вход, однако в диаметрально противоположной точке пещеры (то есть с другой стороны, которую от входа невозможно увидеть) находится волшебная дверь, перегораживающая путь. <a href=https://upload.wikimedia.org/wikipedia/commons/d/dd/Zkip_alibaba1.png>Вот тут можно посмотреть простую схему</a>.</p><p>Очевидно, что если пещера круговая, то войдя в неё можно пойти либо по часовой стрелке (путь А), либо против часовой (путь Б). Однако если вы не знаете <del>стоп-слова</del> секретного слова, которое открывает волшебную дверь, то вы не сможете совершить полный круг. То есть пойдя по пути А вы не сможете в итоге выйти со стороны пути Б и наоборот. Теперь вопрос: как Элис может доказать Бобу, что она знает секретное слово для открытия двери, при этом не разглашая само слово?</p><p>Можно сделать следующее. Боб остаётся недалеко от входа в пещеру, но отворачивается и действий Элис пока не видит. Элис же заходит в пещеру и произвольно выбирает либо путь А, либо путь Б. Когда она доходит до волшебной двери, Боб идёт к выходу и останавливается. Он не знает, как пошла Элис и не видит с какой стороны от двери она стоит. Далее он просто даёт команду либо &ldquo;выходи со стороны А&rdquo;, либо &ldquo;выходи со стороны Б&rdquo;.</p><p>Ясное дело, что если Элис зашла со стороны А и её просят оттуда же выйти, то открывать ей дверь не нужно вовсе: она просто вернётся обратно той же дорогой. Но вот чтобы выйти со стороны Б, ей по-любому придётся открыть дверь. Ну, а если она не знает секретного слова, то эксперимент окажется провален. Если же мы проделаем этот эксперимент раз 30, и если Элис слова не знает, то вероятность провала будет чрезвычайно большой (увеличивается с каждым новым повторением), ведь она каждый раз идёт по случайному пути, а Боб каждый раз называет случайный выход. Если же после 20-30 раза провала не последовало, то почти наверняка слово Элис известно, хотя она всё так же его не раскрыла.</p><h3 id=почему-бы-наблюдающему-просто-не-подойти-ко-входу>Почему бы наблюдающему просто не подойти ко входу?</h3><p>Может возникнуть довольно логичный вопрос: а зачем вообще Боб сначала отворачивается от входа, не зная, куда зашла Элис, а потом даёт ей команду? Он же может просто пойти с ней ко входу, запомнить, куда она зашла, а потом удостовериться, что она вышла из другого входа. Это ведь тоже докажет, что она знает секретное слово! В общем, это так и есть, но с оговоркой.</p><p>Суть zero knowledge в том, что проверяющий как раз имеет &ldquo;нулевое знание&rdquo;, он убеждается в факте путём ряда вероятностных проверок, а не просто фиксируя некий факт. Кроме того, если представить, что Боб взял с собой портативную камеру, то он может зафиксировать весь процесс и обнародовать доказательства. Иными словами, Элис больше не контролирует, у кого это доказательство имеется. В ZK же суть ещё и в том, что доказательство является убедительным для проверяющего, которому оно адресовано. При этом распространить его на третьих лиц проверяющий не может.</p><p>Иными словами, Боб видит лишь финал эксперимента. Даже если он запишет его на камеру, то у третьей стороны может возникнуть резонный вопрос: а вдруг эти двое в сговоре? Боб и Элис просто отрепетировали команды, которые будут даваться, вот и всё. Поэтому ценности у такой записи всё равно не будет.</p><h2 id=цветные-шарики>Цветные шарики</h2><p>Рассмотрим и другой пример, на этот раз с двумя шариками: красным и синим. Предположим, что Боб не умеет различать красный и синий цвета, а Элис умеет. Таким образом, для Боба эти шарики кажутся абсолютно одинаковыми, а для Элис - нет. Она хочет доказать Бобу, что умеет различать цвета и что эти два шарика разные, но при этом не сообщая, какой из них синий, а какой - красный.</p><p>Чтобы это проверить, Боб берёт в каждую руку по шарику и прячет их за спиной. Он имеет право поменять шарики местами (то есть переложить из левой руки в правую и наоборот), но Элис стоит прямо перед Бобом и этих манипуляций не видит. Затем Боб показывает шарик в правой руке, а Элис подмечает про себя его цвет. Боб снова прячет шарик за спину, после чего может вновь поменять их местами по желанию, либо не менять вовсе. Он вновь показывает шарик в правой руке и спрашивает Элис: &ldquo;Я показываю тот же шарик или другой?&rdquo;. Боб не знает цвета шарика, но он ведь знает, менял ли он их за спиной. Следовательно, он понимает тот же это шарик или нет.</p><p>Элис же не сможет с уверенностью сказать тот же ли это шарик или другой, если не умеет различать цвета или если оба шарика серые. В этом случае она будет вынуждена отвечать наобум. Как только она ошибётся, эксперимент будет провален. Таким образом, если мы проведём этот эксперимент 20-30 раз, и Боб будет каждый раз показывать случайный шарик, то давая случайные ответы Элис почти наверняка ошибётся. Если же все 30 раз ей удалось правильно идентифицировать шарик (тот же или другой), то она наверняка может отличить один от другого, но опять же она не сообщает, где какой.</p></section></article></main><footer class=light_gradient lang=en-US><p>&copy; Ilya Krukowski</p></footer><script src=/js/post.min.c6a3ca85a318ecf83b8e11535463ad9865ecb2fa1528b59e028c79a6834fc21b.js integrity="sha256-xqPKhaMY7Pg7jhFTVGOtmGXssvoVKLWeAox5poNPwhs=" defer></script></body></html>